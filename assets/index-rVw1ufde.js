import{d as Be,a as te,r,v as Pe,D as qe,c as N,b as h,m as V,X as T,e as l,w as n,f as i,i as De,F as ne,n as ae,j as s,g as K,Y as oe,P as Se,t as R,Z as $,E as v,o as f}from"./index-BAfmE6z6.js";import{_ as je}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ee={class:"user-container"},Fe={class:"operation-bar"},Me={class:"operation-buttons"},Ie={class:"pagination"},Ne={class:"dialog-footer"},Ke={class:"role-operation"},Oe={class:"table-actions"},Ae=Be({__name:"index",setup(Xe){const o=te({keyword:"",role:"",status:""}),B=[{label:"系统管理员",value:"系统管理员"},{label:"社区管理员",value:"社区管理员"},{label:"网格员",value:"网格员"},{label:"便民服务人员",value:"便民服务人员"},{label:"养老服务专员",value:"养老服务专员"},{label:"文化活动专员",value:"文化活动专员"},{label:"环境监测员",value:"环境监测员"},{label:"志愿服务管理员",value:"志愿服务管理员"},{label:"社区医生",value:"社区医生"}],_=[{id:1,username:"wangxq",name:"王晓强",phone:"13953701245",email:"wangxq@xinglongzhuang.gov.cn",department:"街道信息化办公室",position:"主任",role:"系统管理员",status:"active",lastLogin:"2025-05-03 08:12",createTime:"2025-05-02 09:23"},{id:2,username:"liwn",name:"李文娜",phone:"13853712561",email:"liwn@xinglongzhuang.gov.cn",department:"街道信息化办公室",position:"副主任",role:"社区管理员",status:"active",lastLogin:"2025-05-07 10:45",createTime:"2025-05-06 14:11"},{id:3,username:"liuzhy",name:"刘志洋",phone:"18653734576",email:"liuzhy@xinglongzhuang.gov.cn",department:"社区服务中心",position:"网格员",role:"网格员",status:"active",lastLogin:"2025-05-10 16:08",createTime:"2025-05-09 13:37"},{id:4,username:"zhanglm",name:"张丽敏",phone:"15053745652",email:"zhanglm@xinglongzhuang.gov.cn",department:"便民服务中心",position:"便民服务人员",role:"便民服务人员",status:"active",lastLogin:"2025-05-12 09:56",createTime:"2025-05-11 10:05"},{id:5,username:"chengl",name:"陈国磊",phone:"15153756984",email:"chengl@xinglongzhuang.gov.cn",department:"社区服务中心",position:"养老服务专员",role:"养老服务专员",status:"active",lastLogin:"2025-05-15 11:22",createTime:"2025-05-14 08:44"},{id:6,username:"sunxy",name:"孙晓宇",phone:"15253767690",email:"sunxy@xinglongzhuang.gov.cn",department:"社区服务中心",position:"文化活动专员",role:"文化活动专员",status:"active",lastLogin:"2025-05-16 15:33",createTime:"2025-05-15 16:18"},{id:7,username:"zhoujl",name:"周建林",phone:"15353778901",email:"zhoujl@xinglongzhuang.gov.cn",department:"社区服务中心",position:"环境监测员",role:"环境监测员",status:"active",lastLogin:"2025-05-17 07:41",createTime:"2025-05-16 12:29"},{id:8,username:"huangyy",name:"黄雅雯",phone:"15553789012",email:"huangyy@xinglongzhuang.gov.cn",department:"社区服务中心",position:"志愿服务管理员",role:"志愿服务管理员",status:"active",lastLogin:"2025-05-18 18:09",createTime:"2025-05-17 19:55"},{id:9,username:"liuhh",name:"刘慧慧",phone:"15653790123",email:"liuhh@xinglongzhuang.gov.cn",department:"社区卫生服务站",position:"社区医生",role:"社区医生",status:"active",lastLogin:"2025-05-19 20:17",createTime:"2025-05-18 21:03"},{id:10,username:"gaoyt",name:"高宇涛",phone:"15753791234",email:"gaoyt@xinglongzhuang.gov.cn",department:"街道信息化办公室",position:"系统管理员",role:"系统管理员",status:"active",lastLogin:"2025-05-20 13:28",createTime:"2025-05-19 14:39"},{id:11,username:"songq",name:"宋倩",phone:"15853792345",email:"songq@xinglongzhuang.gov.cn",department:"社区服务中心",position:"文化活动专员",role:"文化活动专员",status:"active",lastLogin:"2025-05-21 09:10",createTime:"2025-05-20 10:20"},{id:12,username:"weid",name:"魏东",phone:"15953793456",email:"weid@xinglongzhuang.gov.cn",department:"社区服务中心",position:"环境监测员",role:"环境监测员",status:"active",lastLogin:"2025-05-22 11:15",createTime:"2025-05-21 12:30"},{id:13,username:"fengy",name:"冯媛",phone:"13653794567",email:"fengy@xinglongzhuang.gov.cn",department:"社区卫生服务站",position:"社区医生",role:"社区医生",status:"active",lastLogin:"2025-05-23 14:25",createTime:"2025-05-22 15:40"},{id:14,username:"zhangl",name:"张磊",phone:"13753795678",email:"zhangl@xinglongzhuang.gov.cn",department:"街道信息化办公室",position:"系统管理员",role:"系统管理员",status:"active",lastLogin:"2025-05-24 16:35",createTime:"2025-05-23 17:50"},{id:15,username:"liuy",name:"刘洋",phone:"13853796789",email:"liuy@xinglongzhuang.gov.cn",department:"社区服务中心",position:"养老服务专员",role:"养老服务专员",status:"active",lastLogin:"2025-05-25 18:45",createTime:"2025-05-24 19:00"},{id:16,username:"sunl",name:"孙磊",phone:"13953797890",email:"sunl@xinglongzhuang.gov.cn",department:"社区服务中心",position:"便民服务人员",role:"便民服务人员",status:"active",lastLogin:"2025-05-26 20:55",createTime:"2025-05-25 21:10"},{id:17,username:"zhangy",name:"张艳",phone:"15053798901",email:"zhangy@xinglongzhuang.gov.cn",department:"社区服务中心",position:"志愿服务管理员",role:"志愿服务管理员",status:"active",lastLogin:"2025-05-27 08:05",createTime:"2025-05-26 09:20"},{id:18,username:"liuq",name:"刘强",phone:"15153799012",email:"liuq@xinglongzhuang.gov.cn",department:"社区服务中心",position:"网格员",role:"网格员",status:"active",lastLogin:"2025-05-28 10:15",createTime:"2025-05-27 11:30"},{id:19,username:"wangf",name:"王芳",phone:"15253790123",email:"wangf@xinglongzhuang.gov.cn",department:"社区服务中心",position:"社区管理员",role:"社区管理员",status:"active",lastLogin:"2025-05-29 12:25",createTime:"2025-05-28 13:40"},{id:20,username:"chenj",name:"陈静",phone:"15353791234",email:"chenj@xinglongzhuang.gov.cn",department:"社区服务中心",position:"便民服务人员",role:"便民服务人员",status:"active",lastLogin:"2025-05-30 14:35",createTime:"2025-05-29 15:50"}],O=r([]),b=r(1),k=r(10),P=r(100),y=r(!1),z=r("add"),q=r(),u=te({id:0,username:"",name:"",phone:"",email:"",department:"",position:"",role:"",status:"正常",lastLogin:"",createTime:""}),D=r(!1),S=r("list"),C=r([]),ie=r(),A=r([{id:1,name:"系统管理",children:[{id:11,name:"用户管理"},{id:12,name:"角色管理"},{id:13,name:"权限管理"}]},{id:2,name:"设备管理",children:[{id:21,name:"设备列表"},{id:22,name:"设备监控"},{id:23,name:"设备维护"}]}]),X=r([11,21]),Y=a=>{const e=B.find(p=>p.value===a);return e?e.label:a},g=()=>{let a=[..._];o.keyword&&(a=a.filter(e=>e.username.includes(o.keyword)||e.phone.includes(o.keyword))),o.role&&(a=a.filter(e=>e.role===o.role)),o.status&&(a=a.filter(e=>e.status===o.status)),P.value=a.length,O.value=a.slice((b.value-1)*k.value,b.value*k.value)},Z=()=>{o.keyword="",o.role="",o.status="",b.value=1,g()},se=()=>{z.value="add",y.value=!0,Object.assign(u,{id:Date.now(),username:"",name:"",phone:"",email:"",department:"",position:"",role:"",status:"正常",lastLogin:"",createTime:""})},ue=a=>{z.value="edit",y.value=!0,Object.assign(u,a)},re=a=>{$.confirm("确定要删除该用户吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=_.findIndex(p=>p.id===a.id);e!==-1&&(_.splice(e,1),g(),v.success("删除成功"),P.value=_.length)})},de=a=>{a.status=a.status==="active"?"inactive":"active";const e=a.status==="active"?"启用":"禁用";v.success(`已${e}用户：${a.username}`)},me=async()=>{q.value&&await q.value.validate(a=>{if(a){if(z.value==="add"){const e={...u,id:Date.now(),createTime:new Date().toLocaleString(),lastLogin:""};_.unshift(e),g(),v.success("新增成功")}else{const e=_.findIndex(p=>p.id===u.id);e!==-1&&(_[e]={...u,id:u.id,createTime:u.createTime,lastLogin:u.lastLogin},g(),v.success("修改成功"))}y.value=!1}})},pe=a=>{k.value=a,g()},ge=a=>{b.value=a,g()},ce=()=>{D.value=!0},ve=()=>{$.prompt("请输入新角色名称","新增角色",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{2,20}$/,inputErrorMessage:"角色名称长度为2-20个字符"}).then(({value:a})=>{const e={id:Date.now(),name:a,description:"",permissions:[],createTime:new Date().toLocaleString()};C.value.push(e),v.success("新增角色成功")})},fe=a=>{$.prompt("请输入新的角色名称","编辑角色",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:a.name,inputPattern:/^.{2,20}$/,inputErrorMessage:"角色名称长度为2-20个字符"}).then(({value:e})=>{a.name=e,v.success("编辑角色成功")})},_e=a=>{$.confirm("确定要删除该角色吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=C.value.findIndex(p=>p.id===a.id);e!==-1&&(C.value.splice(e,1),v.success("删除成功"))})},be=a=>{S.value="permission",X.value=[11,21],v.info(`为角色【${a.name}】分配权限（仅模拟）`)},x=r(!1),ye=r([]),he=r(null),G=r(),ke=a=>{var e;he.value=a.id,(e=G.value)==null||e.setCheckedKeys(["1","1-1","1-2"]),x.value=!0},xe=()=>{v.success("权限已保存（仅模拟）"),x.value=!1},H=Pe(()=>!!o.role||!!o.status||!!o.keyword),j=a=>{o[a]="",b.value=1,g()},we={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"change"}]};return qe(()=>{g()}),(a,e)=>{const p=i("el-input"),c=i("el-form-item"),L=i("el-option"),E=i("el-select"),d=i("el-button"),J=i("el-form"),F=i("el-icon"),U=i("el-tag"),Ve=i("el-row"),m=i("el-table-column"),Te=i("el-switch"),M=i("el-dropdown-item"),ze=i("el-dropdown-menu"),Ce=i("el-dropdown"),Q=i("el-table"),Le=i("el-pagination"),Ue=i("el-card"),W=i("el-radio"),Re=i("el-radio-group"),I=i("el-dialog"),ee=i("el-tree"),le=i("el-tab-pane"),$e=i("el-tabs");return f(),N("div",Ee,[h("div",Fe,[l(J,{inline:!0,model:o,class:"search-form"},{default:n(()=>[l(c,null,{default:n(()=>[l(p,{modelValue:o.keyword,"onUpdate:modelValue":e[0]||(e[0]=t=>o.keyword=t),placeholder:"用户名/手机号",clearable:"",onKeyup:De(g,["enter"])},null,8,["modelValue"])]),_:1}),l(c,null,{default:n(()=>[l(E,{modelValue:o.role,"onUpdate:modelValue":e[1]||(e[1]=t=>o.role=t),placeholder:"角色",clearable:"",style:{width:"140px"}},{default:n(()=>[(f(),N(ne,null,ae(B,t=>l(L,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(c,null,{default:n(()=>[l(E,{modelValue:o.status,"onUpdate:modelValue":e[2]||(e[2]=t=>o.status=t),placeholder:"状态",clearable:"",style:{width:"140px"}},{default:n(()=>[l(L,{label:"启用",value:"active"}),l(L,{label:"禁用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),l(c,null,{default:n(()=>[l(d,{type:"primary",onClick:g},{default:n(()=>e[20]||(e[20]=[s("搜索")])),_:1,__:[20]}),l(d,{onClick:Z},{default:n(()=>e[21]||(e[21]=[s("重置")])),_:1,__:[21]})]),_:1})]),_:1},8,["model"]),h("div",Me,[l(d,{type:"primary",onClick:se},{default:n(()=>[l(F,null,{default:n(()=>[l(K(oe))]),_:1}),e[22]||(e[22]=s("新增用户 "))]),_:1,__:[22]}),l(d,{type:"success",onClick:ce},{default:n(()=>[l(F,null,{default:n(()=>[l(K(Se))]),_:1}),e[23]||(e[23]=s("角色管理 "))]),_:1,__:[23]})])]),H.value?(f(),V(Ve,{key:0,class:"filter-tags",style:{"margin-bottom":"10px"}},{default:n(()=>[o.role?(f(),V(U,{key:0,type:"info",closable:"",onClose:e[3]||(e[3]=()=>j("role"))},{default:n(()=>[s(" 角色："+R(Y(o.role)),1)]),_:1})):T("",!0),o.status?(f(),V(U,{key:1,type:"info",closable:"",onClose:e[4]||(e[4]=()=>j("status"))},{default:n(()=>[s(" 状态："+R(o.status==="active"?"启用":"禁用"),1)]),_:1})):T("",!0),o.keyword?(f(),V(U,{key:2,type:"info",closable:"",onClose:e[5]||(e[5]=()=>j("keyword"))},{default:n(()=>[s(" 关键词："+R(o.keyword),1)]),_:1})):T("",!0),H.value?(f(),V(d,{key:3,size:"small",type:"text",onClick:Z},{default:n(()=>e[24]||(e[24]=[s("清除全部")])),_:1,__:[24]})):T("",!0)]),_:1})):T("",!0),l(Ue,{class:"user-list"},{default:n(()=>[l(Q,{data:O.value,border:"",style:{width:"100%"},"highlight-current-row":""},{default:n(()=>[l(m,{type:"selection",width:"55"}),l(m,{prop:"username",label:"用户名","min-width":"120"}),l(m,{prop:"name",label:"姓名","min-width":"120"}),l(m,{prop:"phone",label:"手机号","min-width":"120"}),l(m,{prop:"email",label:"邮箱","min-width":"180"}),l(m,{prop:"role",label:"角色","min-width":"120"},{default:n(({row:t})=>[l(U,{type:t.role==="系统管理员"?"danger":t.role==="社区管理员"?"primary":t.role==="网格员"?"warning":t.role==="便民服务人员"?"success":t.role==="养老服务专员"?"info":t.role==="文化活动专员"?"success":t.role==="环境监测员"?"warning":t.role==="志愿服务管理员"?"primary":t.role==="社区医生"?"success":"default"},{default:n(()=>[s(R(Y(t.role)),1)]),_:2},1032,["type"])]),_:1}),l(m,{prop:"status",label:"状态",width:"100"},{default:n(({row:t})=>[l(Te,{"model-value":t.status,"active-value":"active","inactive-value":"inactive",onClick:()=>de(t)},null,8,["model-value","onClick"])]),_:1}),l(m,{prop:"createTime",label:"创建时间","min-width":"180"}),l(m,{label:"操作",width:"120"},{default:n(({row:t})=>[l(Ce,null,{dropdown:n(()=>[l(ze,null,{default:n(()=>[l(M,{onClick:w=>ue(t)},{default:n(()=>e[26]||(e[26]=[s("编辑")])),_:2,__:[26]},1032,["onClick"]),l(M,{onClick:w=>ke(t)},{default:n(()=>e[27]||(e[27]=[s("权限")])),_:2,__:[27]},1032,["onClick"]),l(M,{divided:"",onClick:w=>re(t),style:{color:"red"}},{default:n(()=>e[28]||(e[28]=[s("删除")])),_:2,__:[28]},1032,["onClick"])]),_:2},1024)]),default:n(()=>[l(d,{link:""},{default:n(()=>e[25]||(e[25]=[s("更多")])),_:1,__:[25]})]),_:2},1024)]),_:1})]),_:1},8,["data"]),h("div",Ie,[l(Le,{"current-page":b.value,"onUpdate:currentPage":e[6]||(e[6]=t=>b.value=t),"page-size":k.value,"onUpdate:pageSize":e[7]||(e[7]=t=>k.value=t),"page-sizes":[10,20,50,100],total:P.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:pe,onCurrentChange:ge},null,8,["current-page","page-size","total"])])]),_:1}),l(I,{modelValue:y.value,"onUpdate:modelValue":e[15]||(e[15]=t=>y.value=t),title:z.value==="add"?"新增用户":"编辑用户",width:"500px"},{footer:n(()=>[h("span",Ne,[l(d,{onClick:e[14]||(e[14]=t=>y.value=!1)},{default:n(()=>e[31]||(e[31]=[s("取消")])),_:1,__:[31]}),l(d,{type:"primary",onClick:me},{default:n(()=>e[32]||(e[32]=[s("确定")])),_:1,__:[32]})])]),default:n(()=>[l(J,{ref_key:"userFormRef",ref:q,model:u,rules:we,"label-width":"80px"},{default:n(()=>[l(c,{label:"用户名",prop:"username"},{default:n(()=>[l(p,{modelValue:u.username,"onUpdate:modelValue":e[8]||(e[8]=t=>u.username=t),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),l(c,{label:"姓名",prop:"name"},{default:n(()=>[l(p,{modelValue:u.name,"onUpdate:modelValue":e[9]||(e[9]=t=>u.name=t),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(c,{label:"手机号",prop:"phone"},{default:n(()=>[l(p,{modelValue:u.phone,"onUpdate:modelValue":e[10]||(e[10]=t=>u.phone=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(c,{label:"邮箱",prop:"email"},{default:n(()=>[l(p,{modelValue:u.email,"onUpdate:modelValue":e[11]||(e[11]=t=>u.email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(c,{label:"角色",prop:"role"},{default:n(()=>[l(E,{modelValue:u.role,"onUpdate:modelValue":e[12]||(e[12]=t=>u.role=t),placeholder:"请选择角色"},{default:n(()=>[(f(),N(ne,null,ae(B,t=>l(L,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(c,{label:"状态",prop:"status"},{default:n(()=>[l(Re,{modelValue:u.status,"onUpdate:modelValue":e[13]||(e[13]=t=>u.status=t)},{default:n(()=>[l(W,{label:"active"},{default:n(()=>e[29]||(e[29]=[s("启用")])),_:1,__:[29]}),l(W,{label:"inactive"},{default:n(()=>e[30]||(e[30]=[s("禁用")])),_:1,__:[30]})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(I,{modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=t=>x.value=t),title:"分配权限",width:"400px"},{footer:n(()=>[l(d,{onClick:e[16]||(e[16]=t=>x.value=!1)},{default:n(()=>e[33]||(e[33]=[s("取消")])),_:1,__:[33]}),l(d,{type:"primary",onClick:xe},{default:n(()=>e[34]||(e[34]=[s("保存")])),_:1,__:[34]})]),default:n(()=>[l(ee,{data:A.value,"show-checkbox":"","node-key":"id","default-checked-keys":ye.value,props:{label:"name",children:"children"},ref_key:"userPermissionTreeRef",ref:G},null,8,["data","default-checked-keys"])]),_:1},8,["modelValue"]),l(I,{modelValue:D.value,"onUpdate:modelValue":e[19]||(e[19]=t=>D.value=t),title:"角色管理",width:"800px"},{default:n(()=>[l($e,{modelValue:S.value,"onUpdate:modelValue":e[18]||(e[18]=t=>S.value=t)},{default:n(()=>[l(le,{label:"角色列表",name:"list"},{default:n(()=>[h("div",Ke,[l(d,{type:"primary",onClick:ve},{default:n(()=>[l(F,null,{default:n(()=>[l(K(oe))]),_:1}),e[35]||(e[35]=s("新增角色 "))]),_:1,__:[35]})]),l(Q,{data:C.value,border:"",style:{width:"100%"}},{default:n(()=>[l(m,{prop:"name",label:"角色名称"}),l(m,{prop:"code",label:"角色编码"}),l(m,{prop:"description",label:"描述"}),l(m,{prop:"createTime",label:"创建时间"}),l(m,{label:"操作",width:"200"},{default:n(({row:t})=>[h("div",Oe,[l(d,{type:"primary",link:"",onClick:w=>fe(t)},{default:n(()=>e[36]||(e[36]=[s("编辑")])),_:2,__:[36]},1032,["onClick"]),l(d,{type:"primary",link:"",onClick:w=>be(t)},{default:n(()=>e[37]||(e[37]=[s("权限")])),_:2,__:[37]},1032,["onClick"]),l(d,{type:"danger",link:"",onClick:w=>_e(t)},{default:n(()=>e[38]||(e[38]=[s("删除")])),_:2,__:[38]},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),_:1}),l(le,{label:"权限配置",name:"permission"},{default:n(()=>[l(ee,{ref_key:"permissionTreeRef",ref:ie,data:A.value,"show-checkbox":"","node-key":"id","default-checked-keys":X.value,props:{label:"name",children:"children"}},null,8,["data","default-checked-keys"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Ge=je(Ae,[["__scopeId","data-v-94a8bb89"]]);export{Ge as default};
